
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>さよならインターネット</title>
  <meta name="author" content="kenjiskywalker">

  
  <meta name="description" content="エントランスがスタイリッシュ めちゃうま健康ランチ 経緯 @kenjiskywalker 是非どうぞ！&mdash; Shinji Tanaka (@stanaka) December 18, 2013 stanakaさんにOKを頂いたのが去年の12月で
色々モジモジしたりしていて、行きたいな〜 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.kenjiskywalker.org/posts/22/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="さよならインターネット" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37377904-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">さよならインターネット</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="main-navigation">
  <li><a href="/">Goodbye The Internet.</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/14/hatena-lunch/">はてなの東京オフィスに美味しいランチをたべさせてもらいに行ってきた</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-14T00:41:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://i.gyazo.com/336367bb2a59faf168c19be50f73550f.png" alt="http://i.gyazo.com/336367bb2a59faf168c19be50f73550f.png" /></p>

<p>エントランスがスタイリッシュ</p>

<p><img src="http://i.gyazo.com/52f29e4701ec70b36c206d837c297f88.png" alt="http://i.gyazo.com/52f29e4701ec70b36c206d837c297f88.png" /></p>

<p>めちゃうま健康ランチ</p>

<hr />

<p>経緯</p>

<blockquote class="twitter-tweet" lang="en"><p><a href="https://twitter.com/kenjiskywalker">@kenjiskywalker</a> 是非どうぞ！</p>&mdash; Shinji Tanaka (@stanaka) <a href="https://twitter.com/stanaka/statuses/413163134078029825">December 18, 2013</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>stanakaさんにOKを頂いたのが去年の12月で<br/>
色々モジモジしたりしていて、行きたいな〜行ってもいいのかな〜<br/>
とモジモジしており、モジモジしてても仕方ない<br/>
連絡しよう！と思ったのが火曜日の夜で、京都には何人か知り合いの人がいるけど<br/>
東京オフィスはどの人を頼ったらいいんだ&hellip;<br/>
と悩んだ挙句、お問い合わせフォームから連絡しました。</p>

<p>これが色々とお手数をおかけしてしまったらしく<br/>
気軽に誰かに声かけた方がよかったらしいので、これを読まれている識者の方々は<br/>
オフィスへ遊びに行くときはまず知り合いの人を頼って連絡しましょう。</p>

<p>id:tomomiiさんからご連絡頂き、木曜日のランチにお邪魔させて頂きました。<br/>
id:onishiさんにご対応頂いてしまって本当に申し訳なかったでした。<br/>
今週末行われる</p>

<ul>
<li><a href="http://dev.classmethod.jp/cloud/aws/jaws-days-2014-immutable-infrastructure/">JAWS DAYS 2014Immutable Infrastructure Track</a></li>
</ul>


<p>のパネルディスカッションのモデレーターと、今月末に行われる超満員の</p>

<ul>
<li><a href="http://atnd.org/events/47786">Immutable Infrastructure Conference #1</a></li>
</ul>


<p>を開催される神様のid:stanakaさんもいらっしゃって、<br/>
サマリーメンバーもなかなかの緊張感を持ったお昼でした。</p>

<p>突然の訪問にも関わらず、カンバン方式での開発態勢や<br/>
デザイナーとエンジニアの仕事の進め方など色々お話しすることができて<br/>
ともて有り難かったです。</p>

<p>ご飯も健康的で美味しくて、最近毎日のように学食ばかり食べている我々にとっては<br/>
最高の昼食でありました。ごちそうさまでした。美味しかったです。</p>

<p>次にお伺いするときはもうちょっと余裕を持って遊びに行けるようにします。<br/>
お邪魔させて頂きありがとうございました。</p>

<p>はてなさんでは<a href="http://hatenacorp.jp/recruit/career/sp-application-engineer">iOSエンジニアを募集中</a>とのことでした。<br/>
美味しいお昼ごはんが食べられるので<br/>
美味しいお昼ごはんが食べたい人は応募してみると良さそうです。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/12/redis-2-8-sentinel-split-brain/">Redisの2.8.2からsplit Brainの対策がされているようです</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-12T01:46:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2.8.2 [FIX] Sentinel better desynchronization to avoid split-brain elections
<a href="https://github.com/antirez/redis/blob/2.8/00-RELEASENOTES#L149">https://github.com/antirez/redis/blob/2.8/00-RELEASENOTES#L149</a></p>

<p>Sentinel: better time desynchronization.
<a href="https://github.com/antirez/redis/commit/75347ada7f431925b97b037b56b5e3801e3fd16d">https://github.com/antirez/redis/commit/75347ada7f431925b97b037b56b5e3801e3fd16d</a></p>

<blockquote><p>Sentinels are now desynchronized in a better way changing the time
handler frequency between 10 and 20 HZ. This way on average a
desynchronization of 25 milliesconds is produced that should be larger
enough compared to network latency, avoiding most split-brain condition
during the vote.</p>

<p>Now that the clocks are desynchronized, to have larger random delays when
performing operations can be easily achieved in the following way.
Take as example the function that starts the failover, that is
called with a frequency between 10 and 20 HZ and will start the
failover every time there are the conditions. By just adding as an
additional condition something like rand()%4 == 0, we can amplify the
desynchronization between Sentinel instances easily.</p></blockquote>

<p>こちらからは以上です。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/01/zen-cha-hannya/">禅、写経、茶の湯</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-01T17:01:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>テレビでお坊さんが、写経をすることで別世界へ行くことができる。<br/>
言葉を永遠と写すことで精神の深いところへたどり着ける。<br/>
という話をされていた。</p>

<p>禅と瞑想も同じで、今日気になっていた茶の湯の本読んでいたら<br/>
決められた動作を静かに正確に行うことによって、精神の深いところへたどり着ける。<br/>
って書いてあって、昔から市中の山居なんて言葉もあったことだし<br/>
当時の人もまた、色々と忙しかったり表層的な事象にやんや悩んだりしていたんだろう。</p>

<p>禅、写経、茶の湯、全部のルーツは心の再生というか<br/>
深いところまで潜っていく浄化作用というか、そういうものがあったのではないかと<br/>
ふと考えた。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/24/ec2-start-raid0-script/">EC2のインスタンスが立ち上がってきた時にEphemeral Diskを束ねてRAID0にするスクリプト</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-24T18:15:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ephemeral Diskが8本ある場合は条件を増やせば良い。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>
</span><span class='line'>PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/aws/bin:/usr/local/bin
</span><span class='line'>
</span><span class='line'>if [[ \`test -e /dev/xvdc ; echo \$?\` -eq 0 ]] ; then
</span><span class='line'>    if [[ \`test -e /dev/xvde ; echo \$?\` -eq 0 ]] ; then
</span><span class='line'>
</span><span class='line'>        # RAID用のファイルをつくる(ephemeral x4バージョン)
</span><span class='line'>        umount /media/ephemeral0
</span><span class='line'>        yes | mdadm --create /dev/md127 --level=0 --raid-devices=4 /dev/xvd[bcde]
</span><span class='line'>        mkfs.ext4 /dev/md127
</span><span class='line'>        mount /dev/md127 /media/ephemeral0
</span><span class='line'>    else
</span><span class='line'>
</span><span class='line'>        # RAID用のファイルをつくる(ephemeral x2バージョン)
</span><span class='line'>        umount /media/ephemeral0
</span><span class='line'>        yes | mdadm --create /dev/md127 --level=0 --raid-devices=2 /dev/xvd[bc]
</span><span class='line'>        mkfs.ext4 /dev/md127
</span><span class='line'>        mount /dev/md127 /media/ephemeral0
</span><span class='line'>    fi
</span><span class='line'>fi</span></code></pre></td></tr></table></div></figure>


<p>このスクリプトを<code>rc.local</code>とか<code>/etc/rc3.d/S~</code>とかに置いておけば<br/>
起動時にRAID0として束ねて立ち上がってくれる。</p>

<blockquote><p>このクールなアイデアは自分発のものではない</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/24/var-lock-subsys/">/var/lock/subsys/について</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-24T17:49:00+09:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>init.dスクリプトの中に<code>/var/lock/subsys/</code>という文字列を見たことはあったが<br/>
何をしているのかまで追ったことはなかった。</p>

<ul>
<li><a href="http://d.hatena.ne.jp/higher_tomorrow/20110421/1303337554">（今さら）Linuxでサービスを登録する - あしのあしあと</a></li>
</ul>


<p>こちらのページに大切なことは全て書いてあった。ありがたい。<br/>
「インスタンス起動時にRoute53でゴニョゴニョして、<br/>
インスタンス終了時にゴニョゴニョしたい」<br/>
という機能を実装するのに、init scriptを作成するのはよくあることだと思う。<br/>
その際、stopが上手く動かなく、その原因が<code>/var/lock/subsys/</code>であったので<br/>
備忘録として記録しておく。</p>

<ul>
<li>/etc/init/rc.conf</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># rc - System V runlevel compatibility
</span><span class='line'>#
</span><span class='line'># This task runs the old sysv-rc runlevel scripts.  It
</span><span class='line'># is usually started by the telinit compatibility wrapper.
</span><span class='line'>#
</span><span class='line'># Do not edit this file directly. If you want to change the behaviour,
</span><span class='line'># please create a file rc.override and put your changes there.
</span><span class='line'>
</span><span class='line'>start on runlevel [0123456]
</span><span class='line'>
</span><span class='line'>stop on runlevel [!$RUNLEVEL]
</span><span class='line'>
</span><span class='line'>task
</span><span class='line'>
</span><span class='line'>export RUNLEVEL
</span><span class='line'>console output
</span><span class='line'>exec /etc/rc.d/rc $RUNLEVEL</span></code></pre></td></tr></table></div></figure>


<ul>
<li>/etc/rc.d/rc</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#! /bin/bash
</span><span class='line'>#
</span><span class='line'># rc            This file is responsible for starting/stopping
</span><span class='line'>#               services when the runlevel changes.
</span><span class='line'>#
</span><span class='line'># Original Author:
</span><span class='line'>#               Miquel van Smoorenburg, &lt;miquels@drinkel.nl.mugnet.org&gt;
</span><span class='line'>#
</span><span class='line'>
</span><span class='line'>... 
</span><span class='line'>
</span><span class='line'># First, run the KILL scripts.
</span><span class='line'>for i in /etc/rc$runlevel.d/K* ; do
</span><span class='line'>
</span><span class='line'>        # Check if the subsystem is already up.
</span><span class='line'>        subsys=${i#/etc/rc$runlevel.d/K??}
</span><span class='line'>        [ -f /var/lock/subsys/$subsys -o -f /var/lock/subsys/$subsys.init ] || continue
</span><span class='line'>        check_runlevel "$i" || continue
</span><span class='line'>
</span><span class='line'>        # Bring the subsystem down.
</span><span class='line'>        [ -n "$UPSTART" ] && initctl emit --quiet stopping JOB=$subsys
</span><span class='line'>        $i stop
</span><span class='line'>        [ -n "$UPSTART" ] && initctl emit --quiet stopped JOB=$subsys
</span><span class='line'>done
</span><span class='line'>
</span><span class='line'># Now run the START scripts.
</span><span class='line'>for i in /etc/rc$runlevel.d/S* ; do
</span><span class='line'>
</span><span class='line'>        # Check if the subsystem is already up.
</span><span class='line'>        subsys=${i#/etc/rc$runlevel.d/S??}
</span><span class='line'>        [ -f /var/lock/subsys/$subsys ] && continue
</span><span class='line'>        [ -f /var/lock/subsys/$subsys.init ] && continue
</span><span class='line'>        check_runlevel "$i" || continue
</span><span class='line'>
</span><span class='line'>        # If we're in confirmation mode, get user confirmation
</span><span class='line'>        if [ "$do_confirm" = "yes" ]; then
</span><span class='line'>                confirm $subsys
</span><span class='line'>                rc=$?
</span><span class='line'>                if [ "$rc" = "1" ]; then
</span><span class='line'>                        continue
</span><span class='line'>                elif [ "$rc" = "2" ]; then
</span><span class='line'>                        do_confirm="no"
</span><span class='line'>                fi
</span><span class='line'>        fi
</span><span class='line'>
</span><span class='line'>        update_boot_stage "$subsys"
</span><span class='line'>        # Bring the subsystem up.
</span><span class='line'>        [ -n "$UPSTART" ] && initctl emit --quiet starting JOB=$subsys
</span><span class='line'>        if [ "$subsys" = "halt" -o "$subsys" = "reboot" ]; then
</span><span class='line'>                export LC_ALL=C
</span><span class='line'>                exec $i start
</span><span class='line'>        fi
</span><span class='line'>        $i start
</span><span class='line'>        [ -n "$UPSTART" ] && initctl emit --quiet started JOB=$subsys
</span><span class='line'>done
</span><span class='line'>[ "$do_confirm" = "yes" ] && rm -f /var/run/confirm
</span><span class='line'>exit 0</span></code></pre></td></tr></table></div></figure>


<p>ということで</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>    [ -f /var/lock/subsys/$subsys -o -f /var/lock/subsys/$subsys.init ] || continue</span></code></pre></td></tr></table></div></figure>


<p>この条件を満たさなければ<code>stop</code>が発動しないことがわかった。<br/>
nginxのinit scriptでも</p>

<ul>
<li><a href="http://wiki.nginx.org/RedHatNginxInitScript">RedHatNginxInitScript</a></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>lockfile=/var/lock/subsys/nginx
</span><span class='line'>
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>start()
</span><span class='line'>{
</span><span class='line'>    [ $retval -eq 0 ] && touch $lockfile
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>stop()
</span><span class='line'>{
</span><span class='line'>    [ $retval -eq 0 ] && rm -f $lockfile
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>としてstart、stop時にlockfileを操作している。</p>

<p>自分の独自スクリプトを作成する場合は</p>

<ul>
<li>/etc/init.d/hoge-script</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/sh
</span><span class='line'>#
</span><span class='line'># hoge-script
</span><span class='line'>#
</span><span class='line'># chkconfig: 2345 20 01
</span><span class='line'># description: hoge-script shell
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>lock_file="/var/lock/subsys/hoge-script"
</span><span class='line'>
</span><span class='line'>start()
</span><span class='line'>{
</span><span class='line'>    # lock_fileを生成しないとshutdownの時に実行されない
</span><span class='line'>    touch ${lock_file}
</span><span class='line'>
</span><span class='line'>    # 処理 
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>stop()
</span><span class='line'>{
</span><span class='line'>    # lock_fileの削除
</span><span class='line'>    rm -r ${lock_file}
</span><span class='line'>
</span><span class='line'>    # 処理
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>case "$1" in
</span><span class='line'>    start)
</span><span class='line'>        start
</span><span class='line'>    ;;
</span><span class='line'>    stop)
</span><span class='line'>        stop
</span><span class='line'>    ;;
</span><span class='line'>    *)
</span><span class='line'>        echo "Usage: $0 {start|stop}"
</span><span class='line'>    ;;
</span><span class='line'>esac
</span><span class='line'>
</span><span class='line'>exit 0</span></code></pre></td></tr></table></div></figure>


<p>のように作成するとstart/stopの処理が正常に動く。<br/>
こういう事象に出くわすと自分の知識がいかに御座なりかわかる。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    <a href="/blog/archives">Blog Archives</a>
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - kenjiskywalker -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
