---
layout: post
title: "式年遷宮インフラストラクチャについて"
published: true
date: "2014-05-21T01:53:00+09:00"
comments: true


---


## 参考エントリ

##### [式年遷宮Infrastracture](http://blog.kenjiskywalker.org/blog/2013/08/11/shikinen-sengoo-infrastracture/)
##### [「技術的負債」を問いなおす」というタイトルでJAWS DAYS 2014で話してきた - delirious thoughts](http://blog.kentarok.org/entry/2014/03/15/224227)

## どうでもいいこと

世界的な表現で言う[BlueGreenDeployment](http://martinfowler.com/bliki/BlueGreenDeployment.html)について気付いたことがあったのでメモ。  
式年遷宮が行われた2013年の当日のメンテナンス時間について調べてみた。

- 皇大神宮
10月2日　午後1時から翌3日午前5時

- 豊受大神宮
10月5日　午後1時から翌6日午前5時

16hour x 2days ということだったらしい。  
この間は神様もお休みしていたのだ。  
  
これを稼働率で計算すると  

```
24(hour) * 365(days) * 20(years) = 175,200
(16hour * 2days)       / 175,200 = 0.0001826484
100 - 0.0001826484               = 99.9998173516
```

__99.9998%__の稼働率となる。わけはなく  
そもそも24時間稼働しているわけではないのでそんな計算は成り立たない。  
  
何が言いたいのかというと、ガチで毎日切り替わるような  
BlueGreenDeploymentなシステムをつくるなら  
少なくとも毎日アクセスの少ない30分ぐらいはダウンしてても良いのではないか。  
それぐらい許容しないで運用でカバーするのは大変なんじゃないかと思った。  
  
何でもかんでもノンストップのコストって結構あるよなって感じるけど  
実際はどうなんだろ。神様も儀式立てて切り替えているんだし  
その辺インターネットのシステムも儀式立てて本番環境切り替えた方が良いのではないか。  
  
なんてことを日本酒飲みながら考えていたりした。
